
    <div class="container-fluid">
        <div class="row">
            <div id='editor_holder'></div>
        </div>
        <button class='btn btn-primary' id='putjob'>Save Job</button>
    </div>


    <script type="text/javascript">

    var posting = $.get("getjob/%s", function (data) {

        if (data.result == "failure") {
            alert (data.reason);
            return;
        }

        var schemaName = data.data.type;
        var element = document.getElementById ('editor_holder');
        var editor = new JSONEditor (element, {
            schema: {
                $ref: "jobschemas/" + schemaName + ".schema"
            },
            ajax: true,
            disable_collapse: true,
            disable_edit_json: true,
            disable_properties: true,
            disable_array_add: true,
            disable_array_delete: true,
            disable_array_reorder: true,
            theme: 'bootstrap3',
            iconlib: 'bootstrap3'
        });

        editor.on ('ready', function() {
            editor.getEditor('root.name').disable();
            editor.setValue (data.data);
            $("#putjob").click (function() {
                var name = data.data.name;
                var value = editor.getValue ();
                var posting = $.post("putjob/" + name, JSON.stringify (value, null, 4), function (data) {
                    if (data.result == 'success') {
                        alert (data.result);
                    } else {
                        alert (data.result + '\n' + data.reason);
                    }
                });
            });
        });

    });

    </script>
