
    <div class="container-fluid">
        <div class="row body_content">
            <div class="panel panel-primary">
	        <div class="panel-heading mediaman" data-i18n="mediaman.Media Managment"></div>
                <div class="panel-body">
                    <table>
                        <tr>
                            <td width="100%"><div class="progress-container"><div class="progress-bar"></div></div></td>
                            <td class="progress-text" nowrap="nowrap"></td>
                        </tr>
                    </table>
                    <ul class="resumable-list"></ul>
                    <button class="btn btn-primary pull-right mediaman" id="mediaupload"><span data-i18n="mediaman.Media Upload"></span></button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/resumable.js"></script>
    <script>
    $ (document).ready (function () {
        $.get("/admin/getconf", function (data) {
            if (data.result == "success") {
                Document.GstreamillConf.conf = data.data;
            } else {
                bootbox.alert ("Get Configure Failure: " + data.reason);
                return;
            }

            $.i18n.init({
                lng: Document.GstreamillConf.language[Document.GstreamillConf.conf.language]
            }, function(t) {
                $(".nav").i18n ();
                $(".mediaman").i18n ();
            });

            var r = new Resumable({
                target: '/media/upload',
                forceChunkSize: true,
                method: 'octet',
                simultaneousUploads: 1
            });
     
            r.assignBrowse($('#mediaupload'));
     
            // Handle file add event
            r.on('fileAdded', function(file){
                // Add the file to the list
                $('.resumable-list').append('<li class="resumable-file-'+file.uniqueIdentifier+'">Uploading <span class="resumable-file-name"></span> <span class="resumable-file-progress"></span>');
                $('.resumable-file-'+file.uniqueIdentifier+' .resumable-file-name').html(file.fileName);
                // Actually start the upload
                r.upload();
            });
     
            r.on('complete', function(){
                // Hide pause/resume when the upload has completed
                $('.resumable-progress .progress-resume-link, .resumable-progress .progress-pause-link').hide();
            });
     
            r.on('fileSuccess', function(file,message){
                // Reflect that the file upload has completed
                $('.resumable-file-'+file.uniqueIdentifier+' .resumable-file-progress').html('(completed)');
            });
     
            r.on('fileError', function(file, message){
                // Reflect that the file upload has resulted in error
                $('.resumable-file-'+file.uniqueIdentifier+' .resumable-file-progress').html('(file could not be uploaded: '+message+')');
            });
     
            r.on('fileProgress', function(file){
                // Handle progress for both the file and the overall upload
                $('.resumable-file-'+file.uniqueIdentifier+' .resumable-file-progress').html(Math.floor(file.progress()*100) + '%');
                $('.progress-bar').css({width:Math.floor(r.progress()*100) + '%'});
            });
        });
    });
    </script>
