
    <div id="query_hint" class="query_hint">
        <img src="img/waiting.gif" />
    </div>
    <div class="container-fluid">
        <div class="row setjob">
            <div class="col-lg-3 sidebar-menu" id="system_menu">
                <ul class="nav nav-stacked">
                    <li><a href="javascript:system();"></i> <span class="glyphicon glyphicon-wrench"></span><span> System Management</span></a></li>
                    <li><a href="javascript:gstreamill();"> <span class="glyphicon glyphicon-film"></span><span> Gstreamill Managment</span></a></li>
                    <li><a href="javascript:network();"> <span class="glyphicon glyphicon-link"></span><span> Network Configure</span></a></li>
                </ul>
            </div>
            <div class="col-lg-9 main-content">
                <div id='main_content'></div>
                <div id='set_gstreamill'></div>
                <button class='btn btn-primary' id='set_gstreamill_btn'>Set Gstreamill</button>
                <div id='system_danger_zone' class="panel panel-danger">
                    <div class="panel-heading">Danger Zone</div>
                    <div class="panel-body">
                        <h4>Restart Device</h4></br>
                        Restart OS, all jobs would stoped.
                        <button class='btn btn-danger pull-right' id='restartdevice'>Restart device</button>
                    </div>
                </div>
                <button class='btn btn-primary' id='setnetworkinterfaces'>Set Network Interfaces</button>
            </div>
        </div>
    </div>


    <script type="text/javascript">

    function show_query_hint (query_hint){
        var query_hint = document.getElementById (query_hint);
        query_hint.style.display="block";
    }

    function hidden_query_hint (query_hint){
        var query_hint = document.getElementById (query_hint);
        query_hint.style.display = "none";
    }

    function system () {
        $.get("/admin/getconf", function (data) {
            if (data.result == "success") {
                Document.GstreamillConf.conf = data.data;
            } else {
                alert ("get configure failure: " + data.reason);
                return;
            }

        show_query_hint ("query_hint");
        $('#system_danger_zone').show ();
        $('#set_gstreamill').hide ();
        $('#set_gstreamill_btn').hide ();
        $('#setnetworkinterfaces').hide ();
        $.get("/stat/system", function (data) {
            var element = document.getElementById ('main_content');
            element.innerHTML = "";
            var editor = new JSONEditor (element, {
                schema: {
                    $ref: "schemas/system_" + Document.GstreamillConf.language[Document.GstreamillConf.conf.language] + ".schema"
                },
                ajax: true,
                disable_collapse: true,
                disable_edit_json: true,
                disable_properties: true,
                disable_array_add: true,
                disable_array_delete: true,
                disable_array_reorder: true,
                theme: 'bootstrap3',
                iconlib: 'bootstrap3'
            });

            editor.on ('ready', function () {
                editor.setValue (data);
                editor.disable ();
                hidden_query_hint ("query_hint");
            });
        });
        });
    }

    function gstreamill () {
        show_query_hint ("query_hint");
        $('#system_danger_zone').hide ();
        $('#setnetworkinterfaces').hide ();
        $.get("/stat/gstreamill", function (data) {
            var element = document.getElementById ('main_content');
            element.innerHTML = "";
            var editor = new JSONEditor (element, {
                schema: {
                    $ref: "schemas/gstreamilloverview.schema"
                },
                ajax: true,
                disable_collapse: true,
                disable_edit_json: true,
                disable_properties: true,
                disable_array_add: true,
                disable_array_delete: true,
                disable_array_reorder: true,
                theme: 'bootstrap3',
                iconlib: 'bootstrap3'
            });

            editor.on ('ready', function () {
                editor.setValue (data);
                editor.disable ();
                hidden_query_hint ("query_hint");
            });
        });
        $.get("/admin/getconf", function (data) {
            var element = document.getElementById ('set_gstreamill');
            element.innerHTML = "";
            var editor = new JSONEditor (element, {
                schema: {
                    $ref: "schemas/gstreamillconf.schema"
                },
                ajax: true,
                disable_collapse: true,
                disable_edit_json: true,
                disable_properties: true,
                disable_array_add: true,
                disable_array_delete: true,
                disable_array_reorder: true,
                theme: 'bootstrap3',
                iconlib: 'bootstrap3'
            });

            editor.on ('ready', function () {
                editor.setValue (data.data);
                hidden_query_hint ("query_hint");
                $('#set_gstreamill').show ();
                $('#set_gstreamill_btn').show ().unbind ('click');
                $('#set_gstreamill_btn').click (function () {
                    show_query_hint ("query_hint");
                    var value = editor.getValue ();
                    $.post ("setconf", JSON.stringify (value, null, 4), function (data) {
                        if (data.result == 'success') {
                            alert (data.result);
                        } else {
                            alert (data.result + '\n' + data.reason);
                        }
                        hidden_query_hint ("query_hint");
                    });
                });
            });
        });
    }

    function network () {
        show_query_hint ("query_hint");
        $('#system_danger_zone').hide ();
        $('#set_gstreamill').hide ();
        $('#set_gstreamill_btn').hide ();
        $.get("/admin/networkinterfaces", function (data) {
            var element = document.getElementById ('main_content');
            element.innerHTML = "";
            var editor = new JSONEditor (element, {
                schema: {
                    $ref: "schemas/networkinterfaces.schema"
                },
                ajax: true,
                disable_collapse: true,
                disable_edit_json: true,
                disable_properties: true,
                disable_array_add: true,
                disable_array_delete: true,
                disable_array_reorder: true,
                theme: 'bootstrap3',
                iconlib: 'bootstrap3'
            });

            editor.on ('ready', function () {
                editor.setValue (data);
                hidden_query_hint ("query_hint");
                $('#setnetworkinterfaces').show ().unbind ('click');
                $('#setnetworkinterfaces').click (function () {
                    show_query_hint ("query_hint");
                    var value = editor.getValue ();
                    $.post ("setnetworkinterfaces", JSON.stringify (value, null, 4), function (data) {
                        if (data.result == 'success') {
                            alert (data.result);
                        } else {
                            alert (data.result + '\n' + data.reason);
                        }
                        hidden_query_hint ("query_hint");
                    });
                });
            });
        });
    }

    $ (document).ready (function () {
        $.get("/admin/gstreamillconf", function (data) {
            Document.GstreamillConf.conf = data;
        });
        system ();
    });

    </script>
