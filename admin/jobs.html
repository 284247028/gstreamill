
    <div class="container-fluid joblist">
        <ul class="list-group" id="joblist">
        </table>
    </div>


    <script type="text/javascript">

    function startJob (name) {

        $.get ("/admin/getjob/" + name, function (data) {

            if (data.result == "failure") {
                alert (data.reason);
                return;
            }

            var job = JSON.stringify (data.data, null, 4);

            $.post ("/admin/start", job, function (response) {
                if (response.result == "success") {
                    alert (response.result);

                } else {
                    alert (response.result + "\n" + response.reason);
                }
            });

        });

    }

    function stopJob (name) {

        $.get ("/admin/stop/" + name, function (response) {
            if (response.result == "success") {
                alert (response.result);

            } else {
                alert (response.result + "\n" + response.reason);
            }
        });

    }

    $(document).ready(function () {

        $.get("/admin/listjob", function (jobs) {
            for (var i = 0; i < jobs.length; i++) {
                var jobStatUrl = '/stat/gstreamill/job/' + jobs[i];
                var jobStat = $.get(jobStatUrl, function (job) {
                    var li = '<li class="list-group-item">\n';
                    li += '<a href="/admin/setjob.html?name=';
                    if (job.result == "success") {
                        data = job.data;
                        li += data.name + '"><h3>' + data.name + '</h3></a>';
                        li += '<button class="btn btn-warning" id="stop" onclick="stopJob(\'' + data.name + '\')">Stop Job</button>';
                    } else {
                        li += job.name + '"><h3>' + job.name + '</h3></a>';
                        li += '<button class="btn btn-primary" id="stop" onclick="startJob(\'' + job.name + '\')">Start Job</button>';
                    }
                    li += '</li>';
                    $('#joblist').append(li);
                });
            }
        });

    });

    </script>
